<!DOCTYPE HTML>
<html lang="en" id="projects-page">

<body>

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

    <!-- JQuery UI -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>

    <!-- Materialize -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script> -->

    <!-- icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- vars -->
    <script type="text/javascript">
        var materials = <%= @material_data.to_json.html_safe %>;
        var names = <%= @material_names.to_json.html_safe %>;
        var SAVE_URL = '/model';
        var curr_assembly = <%= @curr_assembly.to_json.html_safe %>;
        var curr_name = <%= @curr_name.to_json.html_safe %>;
    </script>

    <% javascript_include_tag "model" %>
    <% stylesheet_link_tag "model", media: "all" %>

<div class="projects-page">
   <table id="workspace">
       <tr id="header">
           <td><h4 class="section-title">Library</h4></td>
           <td><div class="assembly-box"> 
               <input type="text" placeholder="Assembly Title" id="assembly-title" onkeypress="return searchKeyPress(event);">
           </div></td>
       </tr>
       

       <tr>
       <td id="library">
       <!-- Library menu -->
       <ul id="menu" class="collapsible" data-collapsible="accordion">
           <!-- Materials -->
           <li id="material-dropdown">
             <div style="background-color: #b33" class="collapsible-header active"><i class="material-icons">expand_more</i>Materials</div>
             <div class="collapsible-body">
               <input type="text" id="material-search" class="autocomplete">
               <ul>
                   <% @material_options.each do |category, materials| %>
                       <ul id="materials" class="collapsible" data-collapsible="expandable">
                       <li>
                           <div class="collapsible-header"><i class="material-icons">expand_more</i><%= category %></div>
                           <div class="collapsible-body">
                               <ul class="collection">
                                   <% materials.each do |material, id| %>
                                       <%= content_tag :li, material, :class => "collection-item draggable", :data => {:type => 'material', :id => id, :name => material} %>
                                   <% end %>
                               </ul>
                           </div>
                       </li>
                       </ul>
                   <% end %>
               </ul>
             </div>
           </li>
           <!-- Manufacturing -->
           <li id="manufacturing-dropdown">
             <div style="background-color: #fb0" class="collapsible-header"><i class="material-icons">expand_more</i>Manufacturing</div>
             <div class="collapsible-body">
                 <input type="text" id="manufacturing-search" class="autocomplete">
                 <ul>
                   <% (@procedures['Manufacturing'] || []).each do |material, procedures| %>
                       <ul id="procedures" class="collapsible" data-collapsible="expandable">
                       <li>
                           <div class="collapsible-header"><i class="material-icons">expand_more</i><%= material %></div>
                           <div class="collapsible-body">
                               <ul class="collection">
                                   <% procedures.each do |procedure, id| %>
                                       <%= content_tag :li, procedure, :class => "collection-item draggable", :data => {:type => 'procedure', :id => id, :name => procedure} %>
                                   <% end %>
                               </ul>
                           </div>
                       </li>
                       </ul>
                   <% end %>
                 </ul>
             </div>
           </li>

           <!-- Transport -->
           <li id="transport-dropdown">
             <div style="background-color: #ee3" class="collapsible-header"><i class="material-icons">expand_more</i>Transport</div>
             <div class="collapsible-body">
                 <input type="text" id="transport-search" class="autocomplete">
                 <ul>
                   <% (@procedures['Transportation'] || []).each do |material, procedures| %>
                       <ul id="procedures" class="collapsible" data-collapsible="expandable">
                       <li>
                           <div class="collapsible-header"><i class="material-icons">expand_more</i><%= material %></div>
                           <div class="collapsible-body">
                               <ul class="collection">
                                   <% procedures.each do |procedure| %>
                                       <li class="collection-item draggable" data-type="procedure"><%= procedure %></li>
                                   <% end %>
                               </ul>
                           </div>
                       </li>
                       </ul>
                   <% end %>
                 </ul>          </div>
           </li>

           <!-- Use -->
           <li>
             <div style="background-color: #3b3" class="collapsible-header"><i class="material-icons">expand_more</i>Use</div>
             <div class="collapsible-body"><p>Add Use Processes Here</p></div>
           </li>

           <!-- End of Life -->
           <li>
             <div style="background-color: #33b" class="collapsible-header"><i class="material-icons">expand_more</i>End of Life</div>
             <div class="collapsible-body"><p>Add End-of-Life Processes Here</p></div>
           </li>
       </ul>
       </td>

       <!-- Build -->
      <td id="assembly">

           <ul id="build" style = " height:400px; border:1px solid #D5D5D5;  overflow-y:scroll;" class="collection"></ul>

               Drop your materials here!

           <button id="save" class="btn-flat"> Save </button>

       </td>

       </tr>
   </table>
</div>

</body>
</html>